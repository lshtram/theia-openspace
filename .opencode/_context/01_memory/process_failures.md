# Process Failures Log

| Date | Agent | Failure | Proposed Mechanism |
|---|---|---|---|
| 2026-02-17 | oracle_e4b1 | Skipped re-validation after Builder fixes. Presented code to user without running Janitor → CodeReviewer → Librarian loop after Builder applied 2 critical fixes (onStop, createRoot). | **Mechanism 1**: Update Oracle.md Phase 4A/4B to state: "If Janitor reports FAIL and Builder fixes issues, loop back to Janitor validation (do NOT proceed to CodeReviewer until Janitor PASS)". **Mechanism 2**: Add validation checkpoint: After ANY Builder fix, Oracle MUST re-run Janitor before proceeding. **Mechanism 3**: Add to validation contract: "Full test suite (lint, typecheck, unit, E2E) must pass before Janitor approval". |
| 2026-02-17 | oracle_e4b1 | E2E tests passed in prior session but app had system hang (infinite loading screen). E2E did not catch the browser freeze caused by circular DI and proxy-factory crash. | **Mechanism 4**: Update E2E test requirements: MUST include browser responsiveness checks (e.g., "wait for main menu to be clickable within 30s", "verify no infinite spinners", "check console for error loops"). **Mechanism 5**: Add E2E smoke test: "App loads → main UI elements render → can open file → can type in editor → can interact with chat" — if ANY step hangs for >30s, test FAILS. |
| 2026-02-17 | Oracle + Janitor | **CRITICAL**: Approved Task 2.0 with broken E2E infrastructure. Janitor gave "PASS WITH CONDITIONS" citing "E2E blocked by infrastructure (non-blocking)". Oracle accepted this and proceeded to CodeReviewer. User correct: "if you can't test, you don't know if you developed correctly". | **Mechanism 6**: **MANDATORY E2E GATE**: ALL E2E tests MUST pass before any task approval. NO conditional approvals. NO "infrastructure issue" excuses. If E2E fails, status is BLOCKED. Fix infrastructure FIRST, run tests, THEN approve. **Mechanism 7**: Remove "conditional approval" language from NSO instructions. Replace with: "If E2E tests fail for ANY reason (infrastructure, flaky tests, code bugs), validation status is BLOCKED. Agent must fix the failure and re-run full validation before proceeding." **Mechanism 8**: Add to Janitor prompt: "E2E test failures are ALWAYS blocking. Infrastructure issues are YOUR responsibility to fix. Do not pass validation to Oracle until E2E tests pass." |
| 2026-02-17 | Oracle + Builder | E2E tests for Task 2.0 written with wrong assumptions about architecture (assumed browser HTTP requests, but Architecture B1 uses backend-side RPC). Tests couldn't be fixed quickly. User authorized parallel work: continue with Tasks 2.1+ using unit tests while E2E infrastructure fixed separately. | **Mechanism 9**: When E2E tests fail due to fundamental architecture mismatch (not code bugs), document as technical debt with detailed fix plan (see `docs/technical-debt/E2E-INFRASTRUCTURE-GAP.md`). **Mechanism 10**: Allow parallel tracks: main development continues with unit test validation, dedicated track fixes E2E infrastructure. **Mechanism 11**: Add E2E architecture validation to TECHSPEC review: "Can E2E tests mock this architecture? If not, document test strategy." |
